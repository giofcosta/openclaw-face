# 2026-02-17 - Gateway Auth & Storage Alert

## Bridge → Gateway Authentication Progress

### Problem Identified
- Bridge server couldn't authenticate with gateway
- Gateway sends `connect.challenge` event requiring device credentials
- Even local connections need: `publicKey`, `signature`, `signedAt`
- `client.id` must be a known constant (like `"cli"`)

### Fixes Applied
1. Fixed gateway URL: `ws://localhost:38191` (removed `/ws/chat` path)
2. Added `GATEWAY_TOKEN` to bridge `.env`
3. Implemented `connect.challenge` handling in `bridge.service.ts`
4. Added `gateway.controlUi.dangerouslyDisableDeviceAuth: true` to `~/.openclaw/openclaw.json`
5. Giovanni restarted gateway to apply config

### Next Step
- Test if bridge can now connect successfully
- If still failing, may need to implement proper device signing (Ed25519)

## ⚠️ CRITICAL: Storage Alert
```
/dev/root: 29GB total, 28GB used, 854MB free (98%)
```
- Only 854MB available - machine is almost full
- Need to clean up: PM2 logs, npm cache, temp files, etc.
- Giovanni asked to check storage - needs cleanup ASAP

## Infrastructure Notes
- Gateway port: 38191
- Bridge server port: 18796
- Staging frontend port: 18797
- Nginx proxy on 18795
